# Web Cache Deception 
# 攻撃におけるキャッシュルールまとめ

## 🧩 キャッシュルールとは？

Webキャッシュは、どのリソースをどのくらいの期間保存するかを決定するルールを持っています。これらのルールは、主に静的リソースを対象に設計されていますが、Web Cache Deception（WCD）攻撃ではこの仕組みを悪用します。

---

## 🔑 主なキャッシュルールの種類

### 1. 静的ファイル拡張子ルール（Static File Extension Rules）

- リクエストされたリソースの**拡張子**に基づいてキャッシュ対象かどうかを判断
- よく使われる拡張子例：
  - `.css`（スタイルシート）
  - `.js`（JavaScript）
  - `.jpg`, `.png`（画像）

### 2. 静的ディレクトリルール（Static Directory Rules）

- URLパスが特定の**ディレクトリプレフィックス**で始まる場合にキャッシュ対象とする
- 例：
  - `/static`
  - `/assets`
  - `/images`

### 3. ファイル名ルール（File Name Rules）

- 特定の**ファイル名**に一致するリソースをキャッシュ対象とする
- 例：
  - `robots.txt`
  - `favicon.ico`

---

## ⚠️ 攻撃との関係性

- WCD攻撃では、動的コンテンツを**静的に見せかけるURL構造**を使ってキャッシュさせる
- 例：`/profile → /profile.css` に変更して、静的ファイルと誤認させる

---

## 🔐 対策のヒント

- キャッシュキーに**Cookieや認証ヘッダー**を含める
- 静的ファイルの拡張子に対して**厳密なルールを設ける**
- `Cache-Control` ヘッダーでキャッシュ対象を明示的に制御する

---

## 📚 参考

この内容は PortSwigger の Web Cache Deception 学習パス「Cache rules」セクションに基づいています。
